(this.webpackJsonpstudent=this.webpackJsonpstudent||[]).push([[0],{132:function(t,e,n){},140:function(t,e){},142:function(t,e){},153:function(t,e){},155:function(t,e){},182:function(t,e){},184:function(t,e){},185:function(t,e){},191:function(t,e){},193:function(t,e){},211:function(t,e){},213:function(t,e){},225:function(t,e){},228:function(t,e){},254:function(t,e,n){},255:function(t,e,n){},256:function(t,e,n){},257:function(t,e,n){},258:function(t,e,n){},259:function(t,e,n){},260:function(t,e,n){},261:function(t,e,n){"use strict";n.r(e);var s=n(0),c=n(5),i=n(125),r=n.n(i),a=(n(132),n(8)),u=n.n(a),o=n(17),h=n(9),l=n(10),d=n(12),j=n(11),f=n(69),b=n.n(f);n(134);b.a.initializeApp({apiKey:"AIzaSyDu7RYF7A3eaC2uedmAEUFyz1u14d1def4",authDomain:"class-104.firebaseapp.com",databaseURL:"https://class-104.firebaseio.com",projectId:"class-104",storageBucket:"class-104.appspot.com",messagingSenderId:"642296584585",appId:"1:642296584585:web:a63c7c9e96c03e203e6958"});var p=b.a.database();function O(){return new Promise((function(t,e){p.ref("class_member").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}))}function x(){return new Promise((function(t,e){p.ref("student").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}))}var v=n(126),m=n.n(v);function g(t,e){return m.a.HmacSHA256(t+e,"lhrYDV62").toString()}var k=n(29),S=(n(254),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={},s}return Object(l.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(k.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault();var e={username:this.state.username.toLowerCase(),password:this.state.password};this.props.checkAccount(e)}},{key:"render",value:function(){var t=this;return Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(s.jsx)("h1",{children:"H\u1eccC SINH"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"login_username",children:"T\xc0I KHO\u1ea2N"}),Object(s.jsx)("input",{name:"username",id:"login_username",onChange:function(e){return t.handleChange(e)},type:"text",autoComplete:"Off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"login_password",children:"M\u1eacT KH\u1ea8U"}),Object(s.jsx)("input",{name:"password",id:"login_password",onChange:function(e){return t.handleChange(e)},type:"password",autoComplete:"Off",required:!0})]}),Object(s.jsx)("p",{onClick:function(){return alert("Ch\u01b0a ph\xe1t tri\u1ec3n.")},children:"Qu\xean m\u1eadt kh\u1ea9u?"}),Object(s.jsx)("button",{type:"submit",children:"\u0110\u0102NG NH\u1eacP"})]})})}}]),n}(c.Component)),C=(n(255),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={},s}return Object(l.a)(n,[{key:"getData",value:function(){var t=Object(o.a)(u.a.mark((function t(){var e,n,s=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,n=[],e.forEach((function(t){t.studentid===s.props.studentid&&n.push(t.classid)})),this.setState({classes:n});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"handleClick",value:function(t){this.props.getClassId(t),this.props.changeStatus("CLASS_INFO")}},{key:"mapClass",value:function(){var t=this;return this.state.classes.map((function(e,n){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:n+1}),Object(s.jsx)("td",{children:e}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{onClick:function(){return t.handleClick(e)},children:"Xem"})})]},n)}))}},{key:"renderClassList",value:function(){if(this.state.classes)return Object(s.jsxs)("div",{className:"class_list",children:[Object(s.jsx)("h1",{children:"Danh s\xe1ch l\u1edbp"}),Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"STT"}),Object(s.jsx)("th",{children:"M\xe3 l\u1edbp"}),Object(s.jsx)("th",{children:"Ch\u1ee9c n\u0103ng"})]}),this.mapClass()]})})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderClassList()})}}]),n}(c.Component)),y=(n(256),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={},s}return Object(l.a)(n,[{key:"getData",value:function(){var t=Object(o.a)(u.a.mark((function t(){var e,n,s=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.filter((function(t){return t.studentid===s.props.studentid}))[0],this.setState({student:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"renderProfile",value:function(){var t=this;if(this.state.student)return Object(s.jsxs)("div",{className:"profile",children:[Object(s.jsx)("h1",{children:"Th\xf4ng tin c\xe1 nh\xe2n"}),Object(s.jsxs)("div",{className:"btn",children:[Object(s.jsx)("button",{onClick:function(){return t.props.changeStatus("EDIT_PROFILE")},children:"S\u1eeda th\xf4ng tin"}),Object(s.jsx)("button",{onClick:function(){return t.props.signOut()},children:"\u0110\u0103ng xu\u1ea5t"})]}),Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"T\xe0i kho\u1ea3n"}),Object(s.jsx)("p",{children:this.state.student.username})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"H\u1ecd v\xe0 t\xean"}),Object(s.jsx)("p",{children:this.state.student.name})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"Gi\u1edbi t\xednh"}),Object(s.jsx)("p",{children:parseInt(this.state.student.gender)?"N\u1eef":"Nam"})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"Ng\xe0y sinh"}),Object(s.jsx)("p",{children:this.state.student.dateofbirth})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(s.jsx)("p",{children:this.state.student.phone})]})]})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderProfile()})}}]),n}(c.Component)),I=n(37),w=(n(257),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={},s}return Object(l.a)(n,[{key:"getData",value:function(){var t=Object(o.a)(u.a.mark((function t(){var e,n,s=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.filter((function(t){return t.studentid===s.props.studentid}))[0],this.setState({student:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"handleChange",value:function(t){var e=t.target,n="checkbox"===e.type?e.checked:e.value,s=e.name,c=function(t){for(var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","+","/"],n="",s=0;s<t;s++)n+=e[Math.floor(Math.random()*e.length)];return n}(10);if("password"===s){var i=g(n,c);this.setState({student:Object(I.a)(Object(I.a)({},this.state.student),{},{salt:c,hash:i})})}else this.setState({student:Object(I.a)(Object(I.a)({},this.state.student),{},Object(k.a)({},s,n))})}},{key:"handleSubmit",value:function(t){var e,n=this;t.preventDefault(),p.ref("student").on("value",(function(t){t.forEach((function(t){t.val().studentid===n.state.student.studentid&&(e=t.key)}))})),p.ref("student").child(e).set(this.state.student),alert("L\u01b0u th\xf4ng tin th\xe0nh c\xf4ng."),this.props.changeStatus("PROFILE")}},{key:"renderEditProfile",value:function(){var t=this;if(this.state.student)return Object(s.jsxs)("div",{className:"edit_profile",children:[Object(s.jsx)("h1",{children:"S\u1eeda th\xf4ng tin c\xe1 nh\xe2n"}),Object(s.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"T\xe0i kho\u1ea3n"}),Object(s.jsx)("input",{type:"text",name:"username",defaultValue:this.state.student.username,disabled:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"M\u1eadt kh\u1ea9u"}),Object(s.jsx)("input",{type:"password",name:"password",onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"H\u1ecd v\xe0 t\xean"}),Object(s.jsx)("input",{type:"text",name:"name",defaultValue:this.state.student.name,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Gi\u1edbi t\xednh"}),Object(s.jsxs)("select",{name:"gender",defaultValue:this.state.student.gender,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0,children:[Object(s.jsx)("option",{value:0,children:"Nam"}),Object(s.jsx)("option",{value:1,children:"N\u1eef"})]})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Ng\xe0y sinh"}),Object(s.jsx)("input",{type:"date",name:"dateofbirth",defaultValue:this.state.student.dateofbirth,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(s.jsx)("input",{type:"number",name:"phone",defaultValue:this.state.student.phone,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsx)("button",{type:"submit",children:"L\u01b0u"})]})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderEditProfile()})}}]),n}(c.Component)),N=(n(258),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={render:0},s}return Object(l.a)(n,[{key:"getData",value:function(){var t=Object(o.a)(u.a.mark((function t(){var e,n,s,c,i,r,a,o,h,l=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:return e=t.sent,n=e.filter((function(t){return t.classid===l.props.classid&&t.studentid===l.props.studentid}))[0],t.next=6,new Promise((function(t,e){p.ref("class").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}));case 6:return s=t.sent,c=s.filter((function(t){return t.classid===l.props.classid}))[0],t.next=10,new Promise((function(t,e){p.ref("course").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}));case 10:return i=t.sent,r=i.filter((function(t){return t.courseid===c.courseid}))[0],t.next=14,new Promise((function(t,e){p.ref("teacher").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}));case 14:a=t.sent,o=a.filter((function(t){return t.teacherid===c.teacherid}))[0],h={classid:this.props.classid,courseid:r.courseid,coursename:r.name,studentid:this.props.studentid,count:n.count,score:n.score,teachername:o.name,teacherphone:o.phone},this.setState({classInfo:h});case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"renderClassInfo",value:function(){if(this.state.classInfo)return Object(s.jsxs)("div",{className:"class_info",children:[Object(s.jsxs)("h1",{children:["Th\xf4ng tin l\u1edbp ",this.state.classInfo.classid]}),Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"M\xe3 kh\xf3a h\u1ecdc"}),Object(s.jsx)("p",{children:this.state.classInfo.courseid})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"T\xean Kh\xf3a h\u1ecdc"}),Object(s.jsx)("p",{children:this.state.classInfo.coursename})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"M\xe3 l\u1edbp h\u1ecdc"}),Object(s.jsx)("p",{children:this.state.classInfo.classid})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"M\xe3 h\u1ecdc sinh"}),Object(s.jsx)("p",{children:this.state.classInfo.studentid})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"S\u1ed1 bu\u1ed5i h\u1ecdc"}),Object(s.jsx)("p",{children:this.state.classInfo.count})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"\u0110i\u1ec3m"}),Object(s.jsx)("p",{children:this.state.classInfo.score})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"Gi\xe1o vi\xean ph\u1ee5 tr\xe1ch"}),Object(s.jsx)("p",{children:this.state.classInfo.teachername})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(s.jsx)("p",{children:this.state.classInfo.teacherphone})]})]})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderClassInfo()})}}]),n}(c.Component)),D=(n(259),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={status:"CLASS_LIST"},s}return Object(l.a)(n,[{key:"option",value:function(){var t=this;switch(this.state.status){case"CLASS_LIST":return Object(s.jsx)(C,{studentid:this.props.studentid,changeStatus:function(e){return t.changeStatus(e)},getClassId:function(e){return t.getClassId(e)}});case"PROFILE":return Object(s.jsx)(y,{studentid:this.props.studentid,signOut:function(){return t.props.signOut()},changeStatus:function(e){return t.changeStatus(e)}});case"EDIT_PROFILE":return Object(s.jsx)(w,{studentid:this.props.studentid,changeStatus:function(e){return t.changeStatus(e)}});case"CLASS_INFO":return Object(s.jsx)(N,{studentid:this.props.studentid,classid:this.state.classid})}}},{key:"changeStatus",value:function(t){this.setState({status:t})}},{key:"getClassId",value:function(t){this.setState({classid:t})}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"student",children:[this.option(),Object(s.jsxs)("div",{className:"btn",children:[Object(s.jsx)("button",{onClick:function(){return t.changeStatus("CLASS_LIST")},children:"L\u1edbp h\u1ecdc"}),Object(s.jsx)("button",{onClick:function(){return t.changeStatus("PROFILE")},children:"C\xe1 nh\xe2n"})]})]})}}]),n}(c.Component)),L=(n(260),function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=JSON.parse(sessionStorage.getItem("studentid"));t&&this.setState({studentid:t})}},{key:"checkAccount",value:function(){var t=Object(o.a)(u.a.mark((function t(e){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:n=t.sent,(s=n.filter((function(t){return e.username===t.username&&g(e.password,t.salt)===t.hash}))[0])?(alert("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),this.setState({studentid:s.studentid}),sessionStorage.setItem("studentid",JSON.stringify(s.studentid))):alert("Sai m\u1eadt kh\u1ea9u ho\u1eb7c t\xe0i kho\u1ea3n kh\xf4ng t\u1ed3n t\u1ea1i.");case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"renderApp",value:function(){var t=this;return this.state.studentid?Object(s.jsx)(D,{studentid:this.state.studentid,signOut:function(){return t.signOut()}}):Object(s.jsx)(S,{checkAccount:function(e){return t.checkAccount(e)}})}},{key:"signOut",value:function(){sessionStorage.clear(),this.setState({studentid:null})}},{key:"render",value:function(){return Object(s.jsx)("div",{children:this.renderApp()})}}]),n}(c.Component));r.a.render(Object(s.jsx)(L,{}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.cb735a24.chunk.js.map